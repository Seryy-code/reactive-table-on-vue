"use strict";(self["webpackChunkproject_router_vue"]=self["webpackChunkproject_router_vue"]||[]).push([[933],{1933:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var l=n(6768);const o={class:"edit"},a=(0,l.Lk)("h1",null,"This is edit page",-1);function u(e,t,n,u,d,r){const p=(0,l.g2)("EditComponent");return(0,l.uX)(),(0,l.CE)("div",o,[a,(0,l.bF)(p)])}var d=n(144),r=n(4232),p=n(5130),i=n(3114),k=n(4373);const c=e=>((0,l.Qi)("data-v-e99ff8a4"),e=e(),(0,l.jt)(),e),s={class:"container"},m={class:"container-table"},L={id:"dataTable"},C=c((()=>(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"№"),(0,l.Lk)("th",null,"марка авто"),(0,l.Lk)("th",null,"номер авто"),(0,l.Lk)("th",null,"дата"),(0,l.Lk)("th",null,"описание работы"),(0,l.Lk)("th",null,"стоимость работы"),(0,l.Lk)("th",null,"запчасти"),(0,l.Lk)("th",null,"стоимость запчастей"),(0,l.Lk)("th",null,"предоплата"),(0,l.Lk)("th",null,"edit")],-1))),b=["onUpdate:modelValue"],y=["onUpdate:modelValue"],V=["onUpdate:modelValue"],E=["onUpdate:modelValue"],U=["onUpdate:modelValue"],h=["onClick"],f={class:"add"},v=["onClick"],w=["onUpdate:modelValue"],X=["onUpdate:modelValue"],R=["onClick"],g={class:"add"},J=["onClick"],_=["onUpdate:modelValue"],F=["onClick"];var W={__name:"EditComponent",setup(e){const t=(0,i.V)(),n=(0,d.KR)(t.state.rows),{state:o,addRow:a,addRowWork:u,addRowPart:c,deleteRow:W,deleteRowWork:x,deleteRowPart:I}=(0,i.V)(),K={mark:"",num:"",data:"",descWork:[{description:"",price:0}],parts:[{name:"",price:0}],prepaid:0},A={description:"",price:0},T={name:"",price:0},j=()=>{a({...K})},D=e=>{u({...A},e)},H=e=>{c({...T},e)},P=async()=>{if(confirm("Сохранить изменения?")){const t=n.value.map((e=>({mark:e.mark,num:e.num,data:e.data,descWork:JSON.stringify(e.descWork),parts:JSON.stringify(e.parts),prepaid:e.prepaid})));try{const e=await k.A.post("https://script.google.com/macros/s/AKfycbzXYtEuXkg9CYxc1Uu-hgyeR6FobuR689nBfPpeWJ4D7E-mTtHU8F-o_0HVTZIGMgFUHw/exec",t);console.log("Data sent successfully:",e.data),alert("Изменения сохранены!")}catch(e){console.error("Error sending data:",e.message),alert("Ошибка при сохранении изменений!")}}};return(e,t)=>((0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",m,[(0,l.Lk)("table",L,[C,((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,d.R1)(o).rows,((e,t)=>((0,l.uX)(),(0,l.CE)("tr",{key:t},[(0,l.Lk)("td",null,(0,r.v_)(t+1),1),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.mark=t},null,8,b),[[p.Jo,e.mark]])]),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.num=t},null,8,y),[[p.Jo,e.num]])]),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.data=t},null,8,V),[[p.Jo,e.data]])]),(0,l.Lk)("td",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.descWork,((e,t)=>((0,l.uX)(),(0,l.CE)("tr",{key:(e.description,t)},[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.description=t},null,8,E),[[p.Jo,e.description]])])))),128))]),(0,l.Lk)("td",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.descWork,((e,n)=>((0,l.uX)(),(0,l.CE)("tr",{key:(e.price,n)},[(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.price=t},null,8,U),[[p.Jo,e.price]]),(0,l.Lk)("button",{onClick:e=>(0,d.R1)(x)(t,n)},"delete",8,h)])))),128)),(0,l.Lk)("tr",f,[(0,l.Lk)("button",{onClick:e=>D(t)},"add",8,v)])]),(0,l.Lk)("td",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.parts,((e,t)=>((0,l.uX)(),(0,l.CE)("tr",{key:(e.name,t)},[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.name=t},null,8,w),[[p.Jo,e.name]])])))),128))]),(0,l.Lk)("td",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.parts,((e,n)=>((0,l.uX)(),(0,l.CE)("tr",{key:(e.price,n)},[(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.price=t},null,8,X),[[p.Jo,e.price]]),(0,l.Lk)("button",{onClick:e=>(0,d.R1)(I)(t,n)},"delete",8,R)])))),128)),(0,l.Lk)("tr",g,[(0,l.Lk)("button",{onClick:e=>H(t)},"add",8,J)])]),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.prepaid=t},null,8,_),[[p.Jo,e.prepaid]])]),(0,l.Lk)("td",null,[(0,l.Lk)("button",{onClick:e=>(0,d.R1)(W)(t)},"Delete",8,F)])])))),128))]),(0,l.Lk)("div",{class:"container-edit"},[(0,l.Lk)("button",{onClick:j},"add row"),(0,l.Lk)("button",{onClick:P},"save")])])]))}},x=n(1241);const I=(0,x.A)(W,[["__scopeId","data-v-e99ff8a4"]]);var K=I,A={name:"EditView",components:{EditComponent:K}};const T=(0,x.A)(A,[["render",u]]);var j=T}}]);
//# sourceMappingURL=933.648f9fae.js.map