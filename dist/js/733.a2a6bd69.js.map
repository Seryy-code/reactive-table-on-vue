{"version":3,"file":"js/733.a2a6bd69.js","mappings":"uMACOA,MAAM,Q,GACTC,EAAAA,EAAAA,IAAgC,UAA5B,2BAAuB,G,4EAD7BC,EAAAA,EAAAA,IAGM,MAHNC,EAGM,CAFJC,GACAC,EAAAA,EAAAA,IAAiBC,I,u8BCwFrB,MAAMC,GAAQC,EAAAA,EAAAA,KACRC,GAAOC,EAAAA,EAAAA,IAAIH,EAAMI,MAAMF,OAEvB,MACJE,EAAK,OACLC,EAAM,WACNC,EAAU,WACVC,EAAU,UACVC,EAAS,cACTC,EAAa,cACbC,IACET,EAAAA,EAAAA,KAEEU,EAAS,CACbC,KAAM,GACNC,IAAK,GACLC,KAAM,GACNC,SAAU,CAAC,CAAEC,YAAa,GAAIC,MAAO,IACrCC,MAAO,CAAC,CAAEC,KAAM,GAAIF,MAAO,EAAGG,QAAS,IACvCC,QAAS,GAELC,EAAa,CACjBN,YAAa,GACbC,MAAO,GAEHM,EAAa,CACjBJ,KAAM,GACNF,MAAO,EACPG,QAAS,GAGLI,EAAaA,KACjBnB,EAAO,IAAKM,GAAS,EAEjBc,EAAkBC,IACtBpB,EAAW,IAAKgB,GAAcI,EAAM,EAEhCC,EAAkBD,IACtBnB,EAAW,IAAKgB,GAAcG,EAAM,EAGhCE,EAAWC,UACf,GAAIC,QAAQ,wBAAyB,CACnC,MAAMC,EAAgB7B,EAAK8B,MAAMC,KAAKC,IAAG,CACvCtB,KAAMsB,EAAItB,KACVC,IAAKqB,EAAIrB,IACTC,KAAMoB,EAAIpB,KACVC,SAAUoB,KAAKC,UAAUF,EAAInB,UAC7BG,MAAOiB,KAAKC,UAAUF,EAAIhB,OAC1BG,QAASa,EAAIb,YAEf,IACE,MAAMgB,QAAiBC,EAAAA,EAAMC,KAC3B,qHACAR,GAEFS,QAAQC,IAAI,0BAA2BJ,EAASvB,MAChD4B,MAAM,uBACR,CAAE,MAAOC,GACPH,QAAQG,MAAM,sBAAuBA,EAAMC,SAC3CF,MAAM,mCACR,CACF,G,q4ECnJF,MAAMG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,QFEA,GACE1B,KAAM,WACN2B,WAAY,CACVC,cAAaA,IGNjB,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://project-router-vue/./src/views/EditView.vue","webpack://project-router-vue/./src/components/EditComponent.vue","webpack://project-router-vue/./src/components/EditComponent.vue?e94c","webpack://project-router-vue/./src/views/EditView.vue?eb6a"],"sourcesContent":["<template>\r\n  <div class=\"edit\">\r\n    <h1>Cтраница редактирования</h1>\r\n    <EditComponent />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport EditComponent from \"@/components/EditComponent.vue\";\r\n\r\nexport default {\r\n  name: \"EditView\",\r\n  components: {\r\n    EditComponent,\r\n  },\r\n};\r\n</script>\r\n<style>\r\nh1 {\r\n  margin-bottom: 50px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"container\">\r\n    <div class=\"container-table\">\r\n      <table id=\"dataTable\">\r\n        <tr>\r\n          <th>№</th>\r\n          <th>марка авто</th>\r\n          <th>номер авто</th>\r\n          <th>дата</th>\r\n          <th>описание работы</th>\r\n          <th>стоимость работы</th>\r\n          <th>запчасти</th>\r\n          <th>стоимость запчастей</th>\r\n          <th>стоимость запчастей 20%</th>\r\n          <th>предоплата</th>\r\n          <th>edit</th>\r\n        </tr>\r\n        <tr v-for=\"(row, index) in state.rows\" :key=\"index\">\r\n          <td>{{ index + 1 }}</td>\r\n          <td>\r\n            <input type=\"text\" v-model=\"row.mark\" />\r\n          </td>\r\n          <td>\r\n            <input type=\"text\" v-model=\"row.num\" />\r\n          </td>\r\n          <td><input type=\"text\" v-model=\"row.data\" /></td>\r\n          <td>\r\n            <tr\r\n              v-for=\"(work, workIndex) in row.descWork\"\r\n              :key=\"(work.description, workIndex)\"\r\n            >\r\n              <input type=\"text\" v-model=\"work.description\" />\r\n            </tr>\r\n          </td>\r\n          <td>\r\n            <tr\r\n              v-for=\"(work, workIndex) in row.descWork\"\r\n              :key=\"(work.price, workIndex)\"\r\n            >\r\n              <input type=\"number\" v-model=\"work.price\" />\r\n              <button @click=\"deleteRowWork(index, workIndex)\">delete</button>\r\n            </tr>\r\n            <tr class=\"add\">\r\n              <button @click=\"addRowWorkShow(index)\">add</button>\r\n            </tr>\r\n          </td>\r\n          <td>\r\n            <tr\r\n              v-for=\"(part, partIndex) in row.parts\"\r\n              :key=\"(part.name, partIndex)\"\r\n            >\r\n              <input type=\"text\" v-model=\"part.name\" />\r\n            </tr>\r\n          </td>\r\n          <td>\r\n            <tr\r\n              v-for=\"(part, partIndex) in row.parts\"\r\n              :key=\"(part.price, partIndex)\"\r\n            >\r\n              <input type=\"number\" v-model=\"part.price\" />\r\n            </tr>\r\n          </td>\r\n          <td>\r\n            <tr\r\n              v-for=\"(part, partIndex) in row.parts\"\r\n              :key=\"(part.price20, partIndex)\"\r\n            >\r\n              <input type=\"number\" v-model=\"part.price20\" />\r\n              <button @click=\"deleteRowPart(index, partIndex)\">delete</button>\r\n            </tr>\r\n            <tr class=\"add\">\r\n              <button @click=\"addRowPartShow(index)\">add</button>\r\n            </tr>\r\n          </td>\r\n          <td><input type=\"number\" v-model=\"row.prepaid\" /></td>\r\n          <td><button @click=\"deleteRow(index)\">Delete</button></td>\r\n        </tr>\r\n      </table>\r\n      <div class=\"container-edit\">\r\n        <button @click=\"addRowShow\">add row</button>\r\n        <button @click=\"sendData\">save</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport { useRows } from \"../stores/storeRows\";\r\nimport axios from \"axios\";\r\n\r\nconst store = useRows();\r\nconst rows = ref(store.state.rows);\r\n\r\nconst {\r\n  state,\r\n  addRow,\r\n  addRowWork,\r\n  addRowPart,\r\n  deleteRow,\r\n  deleteRowWork,\r\n  deleteRowPart,\r\n} = useRows();\r\n\r\nconst newRow = {\r\n  mark: \"\",\r\n  num: \"\",\r\n  data: \"\",\r\n  descWork: [{ description: \"\", price: 0 }],\r\n  parts: [{ name: \"\", price: 0, price20: 0 }],\r\n  prepaid: 0,\r\n};\r\nconst newRowWork = {\r\n  description: \"\",\r\n  price: 0,\r\n};\r\nconst newRowPart = {\r\n  name: \"\",\r\n  price: 0,\r\n  price20: 0,\r\n};\r\n\r\nconst addRowShow = () => {\r\n  addRow({ ...newRow });\r\n};\r\nconst addRowWorkShow = (index) => {\r\n  addRowWork({ ...newRowWork }, index);\r\n};\r\nconst addRowPartShow = (index) => {\r\n  addRowPart({ ...newRowPart }, index);\r\n};\r\n\r\nconst sendData = async () => {\r\n  if (confirm(\"Сохранить изменения?\")) {\r\n    const formattedRows = rows.value.map((row) => ({\r\n      mark: row.mark,\r\n      num: row.num,\r\n      data: row.data,\r\n      descWork: JSON.stringify(row.descWork),\r\n      parts: JSON.stringify(row.parts),\r\n      prepaid: row.prepaid,\r\n    }));\r\n    try {\r\n      const response = await axios.post(\r\n        \"https://script.google.com/macros/s/AKfycbxsNR62J90qYW84qz1q6FLYZBhMZRxt_Rw2PICee15gt68riMQ_OeJ9UzU_Cms0RN-7Lg/exec\",\r\n        formattedRows\r\n      );\r\n      console.log(\"Data sent successfully:\", response.data);\r\n      alert(\"Изменения сохранены!\");\r\n    } catch (error) {\r\n      console.error(\"Error sending data:\", error.message);\r\n      alert(\"Ошибка при сохранении изменений!\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n  cursor: pointer;\r\n}\r\n.container {\r\n  display: flex;\r\n  justify-content: space-around;\r\n}\r\n.container-table {\r\n  position: relative;\r\n}\r\ntable {\r\n  width: 300px;\r\n  color: black;\r\n}\r\ntable > tr {\r\n  background-color: rgb(255, 255, 255);\r\n}\r\ntable > tr:nth-child(even) {\r\n  background-color: rgb(251, 251, 251);\r\n}\r\ntable,\r\nth,\r\ntd {\r\n  border: 1px solid black;\r\n}\r\ntable input {\r\n  width: 125px;\r\n}\r\n.container-list ul {\r\n  overflow-y: scroll;\r\n  overflow-x: hidden;\r\n  background-color: gray;\r\n  width: 100px;\r\n  height: 150px;\r\n}\r\n.container-list ul input {\r\n  position: fixed;\r\n  left: 0;\r\n  max-width: inherit;\r\n  border: none;\r\n}\r\n.container-edit {\r\n  position: absolute;\r\n  top: -65px;\r\n  right: 0;\r\n  background-color: rgb(255, 255, 255);\r\n  border: 1px solid black;\r\n  padding: 10px;\r\n  max-height: 120px;\r\n}\r\n.container-edit > * {\r\n  margin: 10px;\r\n}\r\n.cont-delete {\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n}\r\n.cont-delete input {\r\n  width: 40px;\r\n}\r\ntr td tr {\r\n  display: flex;\r\n}\r\ntr td {\r\n  position: relative;\r\n}\r\ntr td {\r\n  padding-bottom: 25px;\r\n}\r\ntr td tr.add {\r\n  position: absolute;\r\n  left: -20px;\r\n  bottom: 1px;\r\n}\r\n</style>\r\n","import script from \"./EditComponent.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EditComponent.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./EditComponent.vue?vue&type=style&index=0&id=23138268&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-23138268\"]])\n\nexport default __exports__","import { render } from \"./EditView.vue?vue&type=template&id=3b93b122\"\nimport script from \"./EditView.vue?vue&type=script&lang=js\"\nexport * from \"./EditView.vue?vue&type=script&lang=js\"\n\nimport \"./EditView.vue?vue&type=style&index=0&id=3b93b122&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_EditComponent","store","useRows","rows","ref","state","addRow","addRowWork","addRowPart","deleteRow","deleteRowWork","deleteRowPart","newRow","mark","num","data","descWork","description","price","parts","name","price20","prepaid","newRowWork","newRowPart","addRowShow","addRowWorkShow","index","addRowPartShow","sendData","async","confirm","formattedRows","value","map","row","JSON","stringify","response","axios","post","console","log","alert","error","message","__exports__","components","EditComponent","render"],"sourceRoot":""}